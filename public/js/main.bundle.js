webpackJsonp([0],{152:function(e,t){function n(e){throw new Error("Cannot find module '"+e+"'.")}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=152},153:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),i=n(31),o=n(26),s=n(62),a=n(213),c=(n.n(a),n(559)),u=(n.n(c),n(561)),f=(n.n(u),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,n,r){this.api=e,this.route=t,this.socket=n,this.cdr=r,this.alert=new c.sound("/assets/sounds/message.mp3",{preload:!0})}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.data.subscribe(function(t){var n=t.user,r=t.currentUser;e.typing=!1,e.user=n,e.currentUser=r,e.stopForEach=!1,e.currentUser.friends.forEach(function(t){e.stopForEach||(t._id===e.user._id?(e.friend=!0,e.stopForEach=!0):e.friend=!1)}),e.api.update("messages/see/"+e.user._id,{seen:!0}).catch(function(e){return console.log(e)}),e.api.fetch("messages/direct/"+e.user._id).subscribe(function(t){e.messages=t,e.handleScroll()}),e.socket.sync("message:"+e.user._id,function(t){e.alert.play(),e.messages.push(t),e.handleScroll(),e.typing=!1,e.api.update("messages/seen/"+t._id,{seen:!0}).catch(function(e){return console.log(e)})}),e.socket.sync("message:"+e.user._id+":seen",function(t){t.sender=e.user,a(e.messages,function(n,r){if(n._id===t._id)return e.messages[r].seen=t.seen})}),e.socket.sync("user:"+e.user._id+":typing",function(t){e.typing=t}),e.socket.sync("user:"+e.user._id+":save",function(t){t.active||(e.typing=!1)})}),this.message={}},e.prototype.handleTyping=function(e){this.socket.emit("user:"+this.currentUser._id+":typing",{to:this.user._id,isTyping:e.length>0})},e.prototype.ngAfterViewInit=function(){this.textareaEl.nativeElement.focus()},e.prototype.sendMessage=function(){var e=this;if(this.friend){var t={receipent:this.user._id,sender:this.currentUser._id,text:this.message.text};this.api.create("messages",t).then(function(t){t.sender=e.currentUser,e.message.text=null,e.messages.push(t),e.handleScroll()}).catch(function(e){return console.log(e)})}else{var n="Oooops... vocÃª nÃ£o possui o "+this.user.username+" adicionado! Adicione-o para conversar com ele. ðŸ•¶";this.currentUser._id===this.user._id&&(n="VocÃª nÃ£o pode enviar uma mensagem para si mesmo, "+this.currentUser.username+"! ðŸ˜•");var t={sender:{username:"ChatBot",avatar_url:"https://www.theweakestlink.es/wp-content/uploads/2017/04/bot-de-telegram.jpg"},text:n,created_at:new Date};this.messages.push(t)}},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe(),this.socket.unsync("message:"+this.user._id),this.socket.unsync("message:"+this.user._id+":seen")},e.prototype.handleMessage=function(e){13===e.keyCode&&this.message.text&&this.sendMessage()},e.prototype.handleScroll=function(){this.cdr.detectChanges(),this.messagesEl.nativeElement.scrollTop=this.messagesEl.nativeElement.scrollHeight},e}();f([n.i(r._16)("directMessages"),l("design:type",Object)],d.prototype,"messagesEl",void 0),f([n.i(r._16)("textarea"),l("design:type",Object)],d.prototype,"textareaEl",void 0),d=f([n.i(r.c)({selector:"chat-page",template:"\n    "+u+"\n  "}),l("design:paramtypes",["function"==typeof(p=void 0!==o.a&&o.a)&&p||Object,"function"==typeof(g=void 0!==i.b&&i.b)&&g||Object,"function"==typeof(h=void 0!==s.a&&s.a)&&h||Object,"function"==typeof(m=void 0!==r.E&&r.E)&&m||Object])],d);var p,g,h,m},154:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(31),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e,t){this.activatedRoute=e,this.route=t}return e.prototype.ngOnInit=function(){var e=this;this.route.navigate(["/welcome"]),this.sub=this.activatedRoute.data.subscribe(function(t){var n=t.currentUser;return e.currentUser=n})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e}();a=o([n.i(r.c)({template:'\n    <navigation [currentUser]="currentUser"></navigation>\n    <div class="container">\n      <friends [currentUser]="currentUser"></friends>\n      <router-outlet class="child-views"></router-outlet>\n    </div>\n  '}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object,"function"==typeof(u=void 0!==i.c&&i.c)&&u||Object])],a);var c,u},155:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(562),o=(n.n(i),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),s=function(){function e(){}return e}();s=o([n.i(r.c)({selector:"login-page",template:"\n    "+i+"\n  "})],s)},156:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),i=n(31),o=n(159),s=n(26),a=n(62),c=n(563),u=(n.n(c),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,r){this.route=e,this.event=t,this.api=n,this.socket=r}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.data.subscribe(function(t){var n=t.user,r=t.currentUser;e.friend=!1,e.stopForEach=!1,e.user=n,e.currentUser=r,e.api.fetch("requests/pending/"+e.user._id).subscribe(function(t){e.request=t}),e.socket.sync("request:approved",function(t){e.friend=!0,e.request=void 0}),e.socket.sync("user:"+e.user._id+":save",function(t){e.user=t}),e.currentUser.friends.forEach(function(t){e.stopForEach||(t._id===e.user._id?(e.friend=!0,e.stopForEach=!0):e.friend=!1)}),e.socket.sync("request:"+e.user._id+":created",function(t){e.request=t}),e.socket.sync("request:"+e.user._id+":declined",function(t){e.request=void 0}),e.socket.sync("request:"+e.user._id+":approved",function(t){e.friend=!0,e.request=void 0})})},e.prototype.onChangeAvatar=function(e){this.event.changeAvatar(e),this.user.avatar_url=e},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe(),this.socket.unsync("user:"+this.user._id+":save"),this.socket.unsync("request:"+this.user._id+":declined"),this.socket.unsync("request:approved")},e.prototype.shouldHide=function(e){return!e},e}();l=u([n.i(r.c)({selector:"profile-page",template:"\n    "+c+"\n  "}),f("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object,"function"==typeof(g=void 0!==s.a&&s.a)&&g||Object,"function"==typeof(h=void 0!==a.a&&a.a)&&h||Object])],l);var d,p,g,h},157:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(564),o=(n.n(i),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),s=function(){function e(){}return e}();s=o([n.i(r.c)({selector:"signup-page",template:"\n    "+i+"\n  "})],s)},158:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(565),o=(n.n(i),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),s=function(){function e(){}return e}();s=o([n.i(r.c)({selector:"welcome-page",template:"\n    "+i+"\n  "})],s)},159:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(53),o=(n.n(i),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),s=function(){function e(){this._changeAvatarSource=new i.Subject,this.avatarChanged$=this._changeAvatarSource.asObservable()}return e.prototype.changeAvatar=function(e){this._changeAvatarSource.next(e)},e}();s=o([n.i(r.g)()],s)},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(237),i=n(1),o=n(241);n.i(i.a)(),n.i(r.a)().bootstrapModule(o.a)},240:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(621),o=(n.n(i),n(620)),s=(n.n(o),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),a=function(){function e(){}return e}();a=s([n.i(r.c)({selector:"app",styles:["\n     "+i+"\n     "+o+"\n   "],template:'\n    <ng-progress [showSpinner]="false" color="#5EF38C"\n                 direction="leftToRightIncreased"\n                 positionUsing="translate">\n    </ng-progress>\n    <router-outlet></router-outlet>\n  '})],a)},241:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(1),i=n(61),o=n(71),s=n(72),a=n(240),c=n(242),u=n(73),f=n(26),l=n(159),d=n(62),p=n(556),g=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},h=function(){function e(){}return e}();h=g([n.i(r.b)({imports:[i.a,o.a,s.a,c.a,p.a],providers:[l.a,u.a,f.a,d.a,{provide:s.b,useClass:p.b}],declarations:[a.a],bootstrap:[a.a]})],h)},242:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n(1),i=n(31),o=n(254),s=n(255),a=n(257),c=n(253),u=n(258),f=n(262),l=n(261),d=n(154),p=n(156),g=n(155),h=n(157),m=n(153),v=n(158),b=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},y=[{path:"",component:d.a,children:[{path:"welcome",component:v.a},{path:"profile/:username",component:p.a,resolve:{user:f.a,currentUser:l.a}},{path:"chat/:username",component:m.a,resolve:{user:f.a,currentUser:l.a}}],resolve:{currentUser:l.a}},{path:"login",component:g.a},{path:"signup",component:h.a}],w=function(){function e(){}return e}();w=b([n.i(r.b)({imports:[i.a.forRoot(y),o.a,s.a,a.a,c.a,u.a],providers:[f.a,l.a],exports:[i.a]})],w)},243:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(73),o=n(31),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.router=t,this.auth=e}return e.prototype.ngOnInit=function(){this.model={},this.errors={}},e.prototype.onSubmit=function(){var e=this;this.auth.login(this.model).then(function(t){e.router.navigate(["welcome"])}).catch(function(t){if(401===t.status)return e.errorMessage="E-mail ou senha incorretos!";e.errorMessage="Algo deu errado! Tente novamente."})},e}();c=s([n.i(r.c)({selector:"login",template:'\n    <form name="login">\n      <h1>Chat Project</h1>\n      <label>Email</label>\n      <input type="email" [(ngModel)]="model.email" name="email">\n      <label>Senha</label>\n      <input type="password" [(ngModel)]="model.password" name="password">\n      <p *ngIf="errorMessage"> {{ errorMessage }}</p>\n      <button type="submit" (click)="onSubmit()">Entrar</button>\n      <a routerLink="/signup">Cadastre-se</a>\n    </form>\n  '}),a("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(f=void 0!==o.c&&o.c)&&f||Object])],c);var u,f},244:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(73),o=n(31),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.router=t,this.auth=e}return e.prototype.ngOnInit=function(){this.model={},this.erros={}},e.prototype.onSubmit=function(){var e=this;this.auth.signup(this.model).then(function(t){e.router.navigate(["welcome"])}).catch(function(t){if(401===t.status)return e.errorMessage="Este email jÃ¡ estÃ¡ sendo utilizado!";e.errorMessage="Algo deu errado! Tente novamente."})},e}();c=s([n.i(r.c)({selector:"signup",template:'\n    <form name="signup">\n      <h1>Chat Project</h1>\n      <div class="name-email">\n        <div class="username">\n          <label>@Username</label>\n          <input type="text" [(ngModel)]="model.username" name="username">\n        </div>\n        <div class="email">\n          <label>Email</label>\n          <input type="email" [(ngModel)]="model.email" name="email">\n        </div>\n      </div>\n      <label>Senha</label>\n      <input type="password" [(ngModel)]="model.password" name="email">\n      <p *ngIf="errorMessage"> {{ errorMessage }}</p>\n      <button type="submit" (click)="onSubmit()">Cadastrar</button>\n      <a routerLink="/login">Login</a>\n    </form>\n  '}),a("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(f=void 0!==o.c&&o.c)&&f||Object])],c);var u,f},245:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),i=n(31),o=n(62),s=n(26),a=n(208),c=(n.n(a),n(213)),u=(n.n(c),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,n,r){this.router=t,this.activatedRoute=e,this.socket=n,this.api=r}return e.prototype.ngOnInit=function(){var e=this;this.addListeners(),this.api.fetch("messages/unseen/"+this.currentUser._id).subscribe(function(t){if(t.length>0){var n=t[0],r=a(e.currentUser.friends,function(e){return e._id===n.sender._id});n.sender.notification=!0,e.currentUser.friends[r]=n.sender}})},e.prototype.handleDm=function(e){if(e.notification){e.notification=!1;var t=a(this.currentUser.friends,function(t){return t._id===e._id});this.currentUser.friends[t]=e}this.router.navigate(["/chat/"+e.username])},e.prototype.addListeners=function(){var e=this;this.currentUser.friends.forEach(function(t){var n=t._id;e.socket.sync("user:"+n+":save",function(t){var n=a(e.currentUser.friends,function(e){return e._id===t._id});e.currentUser.friends[n]=t,e.currentUser.friends=e.currentUser.friends.slice()}),e.socket.sync("message:"+e.currentUser._id+":seen",function(t){var n=a(e.currentUser.friends,function(e){return e._id===t.sender._id});t.sender.notification=!1,e.currentUser.friends[n]=t.sender}),e.socket.sync("user:message",function(t){if(t.sender._id===n&&!t.seen){var r=a(e.currentUser.friends,function(e){return e._id===t.sender._id});t.sender.notification=!0,e.currentUser.friends[r]=t.sender}}),e.socket.sync("request:approved",function(t){if(e.currentUser._id===t.requester._id){var n=!1;c(e.currentUser.friends,function(e,r){e._id===t.requested._id&&(n=!0)}),n||e.currentUser.friends.unshift(t.requested)}if(e.currentUser._id===t.requested._id){var r=!1;c(e.currentUser.friends,function(e,n){e._id===t.requester._id&&(r=!0)}),r||e.currentUser.friends.unshift(t.requester)}})})},e}();u([n.i(r.e)(),f("design:type",Object)],l.prototype,"currentUser",void 0),l=u([n.i(r.c)({selector:"friends",template:'\n    <div class="friends-container">\n      <div class="friends">\n        <span [style.display]="block">\n          {{ currentUser.friends.length === 0 ? \'VocÃª ainda nÃ£o possui amigos adicionados! ðŸ˜•\' : \'Fale com seus amigos abaixo: \'}}\n        </span>\n          <ul>\n            <li *ngFor="let friend of currentUser.friends | lastupdated">\n              <div class="friend" (click)="handleDm(friend)">\n                <img [src]="friend.avatar_url" [class]="friend.active ? \'active\' : \'inactive\'">\n                <div class="info">\n                  <p [class]="friend.active ? \'active\' : \'inactive\'">\n                    @{{ friend.username }}\n                    <span *ngIf="friend.notification" class="notification">...</span>\n                  </p>\n                  <span class="last-seen">\n                    visto por Ãºltimo: {{ friend.active ? \'ativo agora\' : friend.updated_at | date: \'MMM dd HH:mm\' }} \n                  </span>\n                </div>\n              </div>\n            </li>\n          </ul>\n      </div>\n    </div>\n  '}),f("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object,"function"==typeof(p=void 0!==i.c&&i.c)&&p||Object,"function"==typeof(g=void 0!==o.a&&o.a)&&g||Object,"function"==typeof(h=void 0!==s.a&&s.a)&&h||Object])],l);var d,p,g,h},246:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e}();i([n.i(r.e)(),o("design:type",Object)],s.prototype,"currentUser",void 0),s=i([n.i(r.c)({selector:"navigation",template:'\n    <nav>\n      <a routerLink="/welcome">\n        <h3>Chat</h3>\n      </a>\n      <div class="search-bar">\n        <search></search>\n      </div>\n      <div class="controls">\n        <notifications></notifications>\n        <a routerLink="/profile/{{ currentUser.username }}" class="perfil">\n          <img [src]="currentUser.avatar_url">\n        </a>\n        <a class="logout" href="/logout">\n          <img src="http://fabounet03.free.fr/Cairo-Dock/themes2.2/Text-White/Text-White/icons/logout.svg"> \n        </a>\n      </div>\n    </nav>\n  '})],s)},247:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),i=n(71),o=n(246),s=n(252),a=n(249),c=n(42),u=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},f=function(){function e(){}return e}();f=u([n.i(r.b)({imports:[c.a,i.b],declarations:[o.a,s.a,a.a],exports:[o.a]})],f)},248:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(26),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.path=new r.i,this.api=e}return e.prototype.handleFile=function(e){var t=this;if(e){this.path.emit(null);var n=new FileReader;n.onload=function(e){t.api.upload("uploads/"+t.kind,e.target.result).subscribe(function(e){return t.path.emit(e.path)},function(e){return console.log(e)})},n.readAsDataURL(e)}},e}();o([n.i(r.e)(),s("design:type",Object)],a.prototype,"kind",void 0),o([n.i(r.e)(),s("design:type",Object)],a.prototype,"allowed",void 0),o([n.i(r._2)(),s("design:type",Object)],a.prototype,"path",void 0),a=o([n.i(r.c)({selector:"upload",template:'\n    <input type="file" [accept]="allowed" #file (change)="handleFile(file.files[0])" /> \n  '}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],a);var c},249:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),i=n(26),o=n(62),s=n(31),a=n(208),c=(n.n(a),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,n){this.requests=[],this.api=e,this.route=t,this.socket=n}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.data.subscribe(function(t){var n=t.currentUser;return e.currentUser=n}),this.api.fetch("requests/pending/me").subscribe(function(t){t&&t.forEach(function(t){t.requested===e.currentUser._id&&e.requests.push(t)})}),this.socket.sync("request:created",function(t){e.api.fetch("requests/"+t._id).subscribe(function(t){e.requests.push(t)})}),this.socket.sync("request:approved",function(t){var n=a(e.requests,function(e){return e._id===t._id});e.requests.splice(n,1),e.viewing=!1}),this.socket.sync("request:declined",function(t){var n=a(e.requests,function(e){return e._id===t._id});e.requests.splice(n,1),e.viewing=!1})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e}();f=c([n.i(r.c)({selector:"notifications",template:'\n    <a (click)="viewing = !viewing">\n      <img src="http://res.cloudinary.com/dvko3bggq/image/upload/v1497498167/alarm_1_cmrimg.png">\n      <span *ngIf="requests.length > 0" class="qtd-notifications">{{ requests.length }}</span>\n    </a>\n    <div class="dropdown" *ngIf="viewing && requests.length > 0">\n      <div *ngFor="let request of requests">\n        <div class="row">\n         <a (click)="viewing = false" routerLink="/profile/{{ request.requester.username }}">\n            <img [src]="request.requester.avatar_url">\n            <span>{{ request.requester.username }} solicitou sua amizade</span>\n          </a>         \n        </div>\n      </div>\n    </div>\n  '}),u("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(d=void 0!==s.b&&s.b)&&d||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],f);var l,d,p},250:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(26),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.api=e}return e.prototype.saveEdit=function(){var e=this;this.api.update("users/"+this.user._id,this.user).then(function(t){e.editing=!1}).catch(function(e){return console.log(e)})},e.prototype.toggleEditing=function(){this.editing=!0},e}();o([n.i(r.e)(),s("design:type",Object)],a.prototype,"user",void 0),o([n.i(r.e)(),s("design:type",Object)],a.prototype,"editable",void 0),a=o([n.i(r.c)({selector:"profile-details",template:'\n    <div class="details" [style.display]="!editing ? \'block\' : \'none\'">\n      <div class="detail">\n        <div class="label">\n          <span>@Username</span>\n        </div>\n        <p>{{ user.username }}</p>\n      </div>\n      <div class="detail" *ngIf="user.description">\n        <div class="label">\n          <span>Bio</span>\n        </div>\n        <p>{{ user.description }}</p>\n      </div>\n    </div>\n    <form class="editor" name="profile" [hidden]="!editing">\n      <label>DescriÃ§Ã£o/Bio</label>\n      <textarea rows="10" cols="100" name="description" [(ngModel)]="user.description">\n      </textarea>\n      <button type="submit" class="saving" (click)="saveEdit()">\n        Salvar \n      </button>\n    </form>\n    <button class="editing" (click)="toggleEditing()"\n      *ngIf="!editing && editable">\n      Editar\n    </button>\n  '}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],a);var c},251:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(26),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.api=e}return e.prototype.sendRequest=function(){var e=this,t={requester:this.currentUser,requested:this.user};this.api.create("requests",t).then(function(t){e.request=t}).catch(function(e){return console.log(e)})},e.prototype.handleApproval=function(e){var t=this;this.api.update("requests/"+this.request._id,{approved:e}).then(function(e){t.request=void 0,t.friend=e.approved}).catch(function(e){return console.log(e)})},e.prototype.removeFriend=function(){var e=this;this.api.update("users/remove-friend/"+this.user._id,{}).then(function(t){e.friend=!1})},e}();o([n.i(r.e)(),s("design:type",Object)],a.prototype,"user",void 0),o([n.i(r.e)(),s("design:type",Object)],a.prototype,"currentUser",void 0),o([n.i(r.e)(),s("design:type",Object)],a.prototype,"request",void 0),o([n.i(r.e)(),s("design:type",Object)],a.prototype,"friend",void 0),a=o([n.i(r.c)({selector:"requests",template:'\n    <div class="requests" *ngIf="user._id !== currentUser._id">\n      <button *ngIf="!request && !friend"\n              class="request-btn"\n              (click)="sendRequest()">\n        Adicionar amigo\n      </button>\n      <p *ngIf="request" class="waiting">Aguardando aprovaÃ§Ã£o...</p>\n      <button class="decline"\n                    (click)="removeFriend()"\n                    *ngIf="!request && friend">\n        Remover @{{ user.username }} da sua lista de amigos\n      </button>\n    </div>\n    <div class="requests" *ngIf="request && request.requested === currentUser._id">\n      <button class="accept" (click)="handleApproval(true)">\n        Aceitar solicitaÃ§Ã£o de amizade de @{{ user.username }}\n      </button>\n      <button class="decline" (click)="handleApproval(false)">\n        Recusar\n      </button>\n    </div>\n  '}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],a);var c},252:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),i=n(71),o=n(26),s=n(572),a=(n.n(s),n(98)),c=(n.n(a),n(573)),u=(n.n(c),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),f=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.term=new i.c,this.api=e}return e.prototype.ngOnInit=function(){var e=this;this.model={},this.term.valueChanges.do(function(){return e.results=null}).debounceTime(600).distinctUntilChanged().subscribe(function(t){if(!t)return e.results=null;e.fetching=!0,e.api.fetch("users/search?term="+t).subscribe(function(t){e.fetching=!1,e.results=t},function(e){return console.log(e)})})},e}();u([n.i(r.e)(),f("design:type",Object)],l.prototype,"currentUser",void 0),l=u([n.i(r.c)({selector:"search",template:'\n    <form name="search-bar">\n      <input type="search" autocomplete="off" name="search"\n        placeholder="Procure por pessoas"\n        [formControl]="term" [(ngModel)]="model.term">\n    </form>\n    <div class="elastic-dropdown" (click)="model = {}" *ngIf="model.term">\n      <div class="fetching" *ngIf="fetching">\n        <figure class="loader"></figure>\n        <p>Procurando por usuÃ¡rios...</p>\n      </div>\n      <div class="results" *ngIf="results">\n        <div class="result" *ngFor="let result of results">\n          <div class="row">\n            <a class="name" routerLink="/profile/{{ result.username }}">\n              <img [src]="result.avatar_url">\n              <p>{{ result.username }}</p>\n            </a>\n            <div class="info">\n              {{ result.description }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '}),f("design:paramtypes",["function"==typeof(d=void 0!==o.a&&o.a)&&d||Object])],l);var d},253:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(42),o=n(153),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=function(){function e(){}return e}();a=s([n.i(r.b)({imports:[i.a],declarations:[o.a],exports:[o.a]})],a)},254:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1),i=n(154),o=n(247),s=n(42),a=n(256),c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},u=function(){function e(){}return e}();u=c([n.i(r.b)({imports:[s.a,o.a,a.a],declarations:[i.a],exports:[i.a]})],u)},255:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(42),o=n(155),s=n(243),a=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=function(){function e(){}return e}();c=a([n.i(r.b)({imports:[i.a],declarations:[o.a,s.a],exports:[o.a]})],c)},256:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1),i=n(42),o=n(156),s=n(250),a=n(251),c=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},u=function(){function e(){}return e}();u=c([n.i(r.b)({imports:[i.a],declarations:[o.a,s.a,a.a],exports:[o.a]})],u)},257:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(157),o=n(244),s=n(42),a=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=function(){function e(){}return e}();c=a([n.i(r.b)({imports:[s.a],declarations:[i.a,o.a],exports:[i.a]})],c)},258:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(158),o=n(42),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=function(){function e(){}return e}();a=s([n.i(r.b)({imports:[o.a],declarations:[i.a],exports:[i.a]})],a)},259:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=function(){function e(){}return e.prototype.transform=function(e){return e.sort(function(e,t){return t.active||e.active?t.active-e.active:t.updated_at>e.updated_at})},e}();o=i([n.i(r.D)({name:"lastupdated"})],o)},26:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1),i=n(72),o=n(574),s=(n.n(o),n(98)),a=(n.n(s),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e){this.http=e;var t=new i.c({"Content-Type":"application/json"});this.options=new i.d({headers:t})}return e.prototype.fetch=function(e){return this.http.get("/api/"+e,this.options).map(function(e){return e.json()})},e.prototype.fetchProject=function(e){var t=this;return this.http.get("/api/projects/"+e,this.options).map(function(e){return e.json()}).do(function(e){return t.project=e})},e.prototype.create=function(e,t){var n=this;return new Promise(function(r,i){n.http.post("/api/"+e,JSON.stringify(t),n.options).subscribe(function(e){r(e.json())},function(e){i(e)})})},e.prototype.update=function(e,t){var n=this;return new Promise(function(r,i){n.http.put("/api/"+e,JSON.stringify(t),n.options).subscribe(function(e){r(e.json())},function(e){i(e)})})},e.prototype.upload=function(e,t){var n=new i.c({"Content-Type":"application/octect-stream"}),r=new i.d({headers:n});return this.http.post("/api/"+e,JSON.stringify(t),r).map(function(e){return e.json()})},e.prototype.logError=function(e){console.log("There was an error: "+e)},e}();u=a([n.i(r.g)(),c("design:paramtypes",["function"==typeof(f=void 0!==i.e&&i.e)&&f||Object])],u);var f},260:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(259),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=function(){function e(){}return e}();s=o([n.i(r.b)({declarations:[i.a],exports:[i.a]})],s)},261:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(73),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.auth=e}return e.prototype.resolve=function(e,t){return this.auth.currentUser?this.auth.currentUser:this.auth.fetchCurrentUser()},e}();a=o([n.i(r.g)(),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],a);var c},262:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(26),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(e){this.api=e}return e.prototype.resolve=function(e,t){return this.api.fetch("users/"+e.params.username)},e}();a=o([n.i(r.g)(),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],a);var c},42:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),i=n(245),o=n(31),s=n(71),a=n(60),c=n(248),u=n(260),f=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},l=function(){function e(){}return e}();l=f([n.i(r.b)({imports:[o.a,s.a,a.a,u.a],declarations:[i.a,c.a],exports:[i.a,o.a,s.a,a.a,c.a,u.a]})],l)},453:function(e,t,n){t=e.exports=n(190)(void 0),t.push([e.i,"html {\n  max-width: 100%;\n  height: 100%;\n  overflow-x: hidden; }\n\nbody {\n  max-width: 100%;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: hidden;\n  background: #ebebed;\n  font-family: 'Helvetica Neue', Helvetica, sans-serif;\n  letter-spacing: 1px;\n  z-index: 1;\n  -ms-overflow-style: -ms-autohiding-scrollbar; }\n\n::-webkit-scrollbar {\n  display: none; }\n\nh1, h2, h3, h4, h5, h6 {\n  font-family: 'Helvetica Neue', Helvetica, sans-serif;\n  font-weight: 700;\n  font-height: 1.25;\n  outline: none; }\n\nh1 {\n  font-size: 4.5vw; }\n\nh2 {\n  font-size: 4.1vw; }\n\nh3 {\n  font-size: 3.5vw; }\n\nh4 {\n  font-size: 3vw; }\n\nh5 {\n  font-size: 2.5vw; }\n\nh6 {\n  font-size: 2vw; }\n\ninput, textarea {\n  font-family: 'Helvetica Neue', Helvetica, sans-serif;\n  background: #ebebed;\n  font-size: 16px; }\n  input::placeholder, textarea::placeholder {\n    color: #C0C0C0;\n    font-family: 'Helvetica Neue', Helvetica, sans-serif;\n    text-align: center; }\n\na {\n  color: #1B81E5;\n  text-decoration: none;\n  font-weight: 400;\n  word-break: break-word; }\n\nbutton {\n  margin: 8px 0;\n  padding: 24px 64px;\n  border-radius: 3px;\n  color: white;\n  border: none;\n  outline: none;\n  font-weight: 200;\n  cursor: pointer; }\n  button[disabled] {\n    background: #C0C0C0; }\n\n.loader {\n  position: absolute;\n  border: 10px solid white;\n  border-radius: 50%;\n  border-top: 10px solid #4b5262;\n  border-bottom: 10px solid #4b5262;\n  width: 40px;\n  height: 40px;\n  -webkit-animation: spin 2s linear infinite;\n  animation: spin 2s linear infinite; }\n\n@-webkit-keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg); } }\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n\nnav {\n  display: flex;\n  justify-content: space-around;\n  top: 0;\n  left: 0;\n  position: fixed;\n  width: 100%;\n  height: 85px;\n  z-index: 1000;\n  background: #373F51; }\n  nav a {\n    padding: 8px;\n    align-self: center;\n    color: white; }\n    nav a img {\n      width: 42px;\n      height: 42px;\n      border-radius: 5px; }\n\n.search-bar {\n  align-self: center;\n  width: 40%;\n  box-sizing: border-box; }\n  .search-bar input[type=search] {\n    font-size: 15px;\n    display: block;\n    width: 100%;\n    padding: 11px;\n    background: white;\n    outline: none;\n    border: none;\n    border-radius: 0; }\n\n.controls {\n  display: flex;\n  justify-content: space-around; }\n  .controls .logout {\n    margin-left: 16px;\n    padding: 16px; }\n    .controls .logout img {\n      color: white;\n      width: 58px;\n      height: 60px; }\n\nfriends {\n  height: 100%;\n  background-color: #4b5262; }\n  friends .friends-container {\n    width: 18vw;\n    height: 100%;\n    padding: 8px;\n    overflow-y: scroll;\n    max-height: 90vh; }\n  friends span {\n    color: #C0C0C0;\n    font-size: 11px; }\n  friends img.active {\n    border: 3px solid green; }\n  friends img.inactive {\n    border: 3px solid white; }\n  friends .friend {\n    display: flex;\n    width: 98%;\n    margin: 8px 0 0 0;\n    padding: 8px 0 8px 5px;\n    cursor: pointer; }\n    friends .friend img {\n      width: 44px;\n      height: 44px;\n      background: #C0C0C0;\n      align-self: center;\n      border-radius: 100%; }\n    friends .friend .info {\n      align-self: center;\n      padding-left: 8px; }\n      friends .friend .info p {\n        color: white;\n        font-weight: 100; }\n    friends .friend .last-seen {\n      font-size: 11px;\n      padding-top: 8px; }\n    friends .friend .notification {\n      color: orange;\n      font-weight: 900;\n      padding: 1px; }\n  friends .friend:hover {\n    background: rgba(0, 0, 0, 0.2);\n    border-radius: 5px; }\n\n.container {\n  display: flex;\n  height: calc(100vh - 85px);\n  margin-top: 85px; }\n  .container profile-page, .container chat-page {\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden; }\n\n.profile {\n  width: 100%;\n  margin: 0 auto; }\n  .profile header {\n    position: relative;\n    height: 310px;\n    background-color: #C0C0C0;\n    background-position: center;\n    background-size: cover; }\n    .profile header .loader {\n      top: 40%;\n      left: 48%; }\n    .profile header upload {\n      position: absolute; }\n      .profile header upload input:before {\n        background: url(\"/assets/icons/camera.png\") #373F51 no-repeat center/cover; }\n    .profile header .avatar {\n      position: absolute;\n      top: 50%;\n      left: 2%;\n      width: 190px;\n      height: 190px; }\n      .profile header .avatar img {\n        width: 100%;\n        height: 100%;\n        border-radius: 3%;\n        border: 4px solid white; }\n        .profile header .avatar img.active {\n          border: 3px solid green; }\n        .profile header .avatar img.inactive {\n          border: 3px solid white; }\n      .profile header .avatar .status {\n        font-size: 11px;\n        padding-left: 80px; }\n      .profile header .avatar upload {\n        top: 3%;\n        left: 3%;\n        right: auto; }\n      .profile header .avatar .loader {\n        top: 30%;\n        left: 27%; }\n  .profile .grid {\n    display: flex; }\n    .profile .grid .info-col {\n      width: 100%;\n      margin-top: 3vh; }\n\n.details {\n  padding-top: 1vw;\n  margin: 0 18px 0; }\n  .details p {\n    color: #373F51; }\n  .details .detail {\n    margin: 2vw 0;\n    color: #373F51;\n    font-weight: 700; }\n    .details .detail p:nth-child(2) {\n      margin-top: 1vw;\n      color: black;\n      font-weight: 400; }\n\n.editor {\n  width: 100%;\n  padding: 4vh 0; }\n  .editor label, .editor p {\n    color: #373F51; }\n  .editor p {\n    align-self: center; }\n  .editor input, .editor label, .editor textarea {\n    display: block;\n    margin: 1vw; }\n  .editor input, .editor textarea {\n    box-sizing: border-box;\n    background: white;\n    color: #373F51;\n    outline: none; }\n  .editor textarea {\n    border: none;\n    resize: none; }\n\n.editing {\n  background: #1B81E5;\n  margin-left: 15px; }\n\n.saving {\n  background: #1B81E5;\n  margin-left: 15px; }\n\nlogin, signup {\n  align-self: center; }\n  login form, signup form {\n    width: 35vw;\n    padding: 16px;\n    background: rgba(55, 63, 81, 0.9); }\n    login form h1, signup form h1 {\n      color: white;\n      text-align: center; }\n    login form label, signup form label {\n      color: white; }\n    login form input, login form label, signup form input, signup form label {\n      display: block;\n      width: 95%;\n      margin: 8px auto 16px; }\n    login form input, signup form input {\n      padding: 8px;\n      background: white;\n      color: #373F51;\n      border-radius: 0;\n      box-sizing: border-box;\n      outline: none; }\n    login form a, signup form a {\n      margin-left: 10px;\n      color: white; }\n    login form button, signup form button {\n      display: block;\n      margin: 8px auto 0;\n      background: #1B81E5; }\n    login form p, signup form p {\n      display: block;\n      margin: 8px 11px 20px;\n      color: white; }\n  login .name-email, signup .name-email {\n    display: flex;\n    justify-content: center;\n    flex-flow: row wrap; }\n    login .name-email .username, login .name-email .email, signup .name-email .username, signup .name-email .email {\n      width: 50%; }\n      login .name-email .username input, login .name-email .email input, signup .name-email .username input, signup .name-email .email input {\n        width: 90%; }\n\n.hero-unit {\n  display: flex;\n  justify-content: center;\n  height: 100vh;\n  background: #4b5262; }\n\n.search-bar {\n  position: relative; }\n  .search-bar .elastic-dropdown {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    width: 100%;\n    max-height: 40vh;\n    background: white;\n    overflow-y: scroll; }\n    .search-bar .elastic-dropdown .fetching {\n      display: flex;\n      height: 6vh;\n      justify-content: center; }\n      .search-bar .elastic-dropdown .fetching .loader {\n        background: #373F51; }\n      .search-bar .elastic-dropdown .fetching p {\n        color: #C0C0C0; }\n  .search-bar .result {\n    display: flex;\n    width: 100%;\n    padding: 2px 0;\n    flex-flow: row wrap;\n    overflow: hidden; }\n    .search-bar .result .name p {\n      color: #1B81E5; }\n    .search-bar .result a {\n      display: flex;\n      padding: 6px 24px;\n      cursor: pointer;\n      align-self: center; }\n    .search-bar .result img {\n      width: 50px;\n      height: 50px;\n      margin: 0 16px 0 0; }\n    .search-bar .result .info {\n      color: #373F51;\n      align-self: center;\n      padding: 10px 0 5px 22px; }\n    .search-bar .result .row {\n      background: #F5F5F5;\n      margin: 2px 5px;\n      width: 100%;\n      border-radius: 3px; }\n\nupload input {\n  display: block;\n  position: relative;\n  margin: 0 auto;\n  width: 1px;\n  height: 1px;\n  outline: none;\n  cursor: pointer; }\n  upload input:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 40px;\n    height: 40px;\n    border: 5px solid #373F51;\n    border-radius: 2px;\n    box-sizing: border-box; }\n\nrequests .requests {\n  padding: 0 2vh; }\n  requests .requests .request-btn {\n    background: #1B81E5; }\n  requests .requests .waiting {\n    color: #373F51;\n    font-weight: 600;\n    font-size: 17px; }\n  requests .requests .accept {\n    background: #1B81E5; }\n  requests .requests .decline {\n    background: orange; }\n\n.group-message {\n  width: 100%;\n  height: 100%;\n  background: #ebebed; }\n  .group-message .messages {\n    position: relative;\n    width: 100%;\n    height: 83%;\n    overflow-y: scroll; }\n  .group-message .gm {\n    position: relative;\n    width: 100%;\n    padding: 8px;\n    box-sizing: border-box; }\n  .group-message .message-container {\n    display: flex;\n    padding: 8px 24px; }\n    .group-message .message-container .message {\n      max-width: 100%;\n      padding: 0 8px;\n      box-sizing: border-box; }\n      .group-message .message-container .message .username {\n        font-weight: 700;\n        color: #4b5262; }\n    .group-message .message-container img {\n      width: 44px;\n      height: 44px;\n      border-radius: 100%; }\n    .group-message .message-container .only-to-you {\n      font-weight: 100;\n      font-size: 15px;\n      font-style: italic; }\n    .group-message .message-container span {\n      font-weight: 200; }\n    .group-message .message-container .user {\n      position: relative;\n      top: 90%;\n      color: green;\n      font-weight: 700; }\n      .group-message .message-container .user span {\n        position: absolute;\n        top: 90%;\n        left: 100%;\n        color: green;\n        font-size: 18px;\n        font-weight: 700; }\n    .group-message .message-container .message-text {\n      padding: 6px 0; }\n  .group-message .typing {\n    padding-left: 30px;\n    font-style: italic;\n    color: #4b5262;\n    position: absolute; }\n  .group-message .send-gm {\n    display: flex;\n    position: relative;\n    width: 100%;\n    margin-left: 20px;\n    margin-top: 10px;\n    height: 15%;\n    padding: 10px;\n    align-self: center;\n    box-sizing: border-box; }\n    .group-message .send-gm textarea {\n      width: 85%;\n      max-height: 100%;\n      padding: 16px 24px;\n      outline: none;\n      resize: none;\n      box-sizing: border-box;\n      border-radius: 3px;\n      border: 2px solid #1B81E5; }\n    .group-message .send-gm button {\n      width: 10%;\n      margin: 0 0 0 5px;\n      padding: 0;\n      background: #1B81E5; }\n\n.done {\n  text-align: center;\n  color: #4b5262;\n  font-weight: 200;\n  padding-top: 5px; }\n\n.welcome {\n  width: 100%;\n  padding: 40px; }\n  .welcome .emoji {\n    display: inline-block;\n    width: 100%;\n    margin: 10px 43%;\n    font-size: 30px; }\n  .welcome ul {\n    margin-top: 30px; }\n  .welcome li {\n    widows: 300px;\n    height: 30px;\n    margin-bottom: 9px; }\n  .welcome li a {\n    display: block;\n    width: 300px;\n    height: 30px;\n    margin-bottom: 9px;\n    background: #F7F5F2;\n    padding: 5px 0 0 20px; }\n  .welcome li a:hover {\n    background-color: #EFEFEF; }\n  .welcome .orange {\n    border-left: 5px solid #F5876E; }\n  .welcome .blue {\n    border-left: 5px solid #61A8DC; }\n  .welcome .green {\n    border-left: 5px solid #8EBD40; }\n  .welcome .purple {\n    border-left: 5px solid #988CC3; }\n  .welcome .gold {\n    border-left: 5px solid #D8C86E; }\n  .welcome .code-style {\n    width: 10%;\n    display: block;\n    margin-top: 30px; }\n    .welcome .code-style img {\n      padding-top: 10px; }\n\nnotifications {\n  align-self: center; }\n  notifications a {\n    cursor: pointer; }\n  notifications .qtd-notifications {\n    font-size: 12px;\n    color: red;\n    border: 1px solid red;\n    padding: 2px; }\n  notifications .dropdown {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    left: 71%;\n    background-color: white;\n    width: 260px;\n    height: 200px;\n    position: absolute;\n    margin-top: 7px;\n    border: 3px solid #1B81E5;\n    border-radius: 4px;\n    color: black;\n    overflow-y: scroll; }\n    notifications .dropdown .row a {\n      display: flex;\n      height: 20px;\n      padding: 15px 0 30px 5px;\n      font-size: 15px; }\n      notifications .dropdown .row a img {\n        width: 44px;\n        height: 44px; }\n      notifications .dropdown .row a span {\n        padding-left: 8px;\n        color: #C0C0C0; }\n",""])},561:function(e,t){e.exports='<div class="group-message">\n  <div class="messages" #directMessages>\n    <p class="done">InÃ­cio das mensagens</p>\n    <div class="gm" *ngFor="let message of messages">\n      <div class="message-container" *ngIf="message">\n        <div class="user">\n          <img [src]="message.sender.avatar_url">\n          <span>{{ message.seen && message.receipent._id !=\n            currentUser._id ? \'&#x2713;\' : \'\' }}</span>\n        </div>\n        <div class="message">\n          <a class="username" routerLink="/profile/{{ message.sender.username }}">\n            {{ message.sender.username }}\n          </a>\n          <span>{{ message.created_at | date: \'MMM dd HH:mm\'}}</span>\n          <span class="only-to-you" *ngIf="message.sender.username === \'ChatBot\'">(VisÃ­vel apenas para vocÃª)</span>\n          <div class="message-text">{{ message.text }}</div> \n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="typing" *ngIf="typing">\n    <p>{{ this.user.username }} estÃ¡ digitando...</p>\n  </div>\n  <form name="gm" class="send-gm" (ngSubmit)="sendMessage()">\n    <textarea [(ngModel)]="message.text" (ngModelChange)="handleTyping($event)" name="message" #textarea (keydown)="handleMessage($event)"></textarea>\n    <button class="send" [disabled]="!message.text">\n      Enviar \n    </button>\n  </form>\n</div>\n'},562:function(e,t){e.exports='<div class="login">\n  <div class="hero-unit">\n    <login></login>\n  </div>\n</div>\n'},563:function(e,t){e.exports='<div class="profile">\n  <header [ngStyle]="{ \'background-image\': !user.cover_url ? \'\' : \'url(\' + user.cover_url + \')\' }">\n    <figure class="loader" *ngIf="shouldHide(user.cover_url)"></figure>\n    <upload \n      allowed="image/*" kind="cover"\n      (path)="user.cover_url = $event"\n      *ngIf="user._id === currentUser._id">\n    </upload>\n    <div class="avatar">\n      <img [class]="user.active ? \'active\' : \'inactive\'"\n           [src]="user.avatar_url" *ngIf="user.avatar_url; else loader">\n      <span class="status">{{ user.active ? \'online\' : \'offline\' }}</span>\n      <ng-template #loader>\n        <figure class="loader"></figure>\n      </ng-template>\n      <upload allowed="image/jpeg,image/png"\n              *ngIf="user._id === currentUser._id"\n              kind="avatar" (path)="onChangeAvatar($event)">\n      </upload>\n    </div>\n  </header>\n  <div class="grid">\n    <div class="info-col">\n      <profile-details [user]="user"\n                        [editable]="user._id === currentUser._id">\n      </profile-details>\n      <requests [user]="user" [currentUser]="currentUser"\n                [request]="request" [friend]="friend">\n      </requests>\n    </div>\n  </div>\n</div>\n'},564:function(e,t){e.exports='<div class="signup">\n  <div class="hero-unit">\n    <signup></signup>\n  </div>\n</div>\n'},565:function(e,t){e.exports='<div class="welcome">\n  <h1>Seja bem-vindo ao sistema Chat!</h1>\n  <span class="emoji">ðŸ’ª</span>\n  <p>"Chat" Ã© um projeto realtime, de estudos, que utiliza as seguintes tecnologias:</p>\n  <ul>\n    <li class="orange"><a href="https://nodejs.org/en/" target="_blank">Node.js v >= 7</a></li>\n    <li class="blue"><a href="https://angular.io/" target="_blank">Angular.js v 4.0.0</a></li>\n    <li class="green"><a href="https://socket.io/" target="_blank">Socket.io</a></li>\n    <li class="purple"><a href="https://webpack.js.org/" target="_blank">Webpack</a></li>\n    <li class="gold"><a href="https://yarnpkg.com/pt-BR/" target="_blank">Yarn</a></li>\n    <li class="orange"><a href="http://sass-lang.com/" target="_blank">Sass</a></li>\n    <li class="blue"><a href="http://mongoosejs.com/" target="_blank">Mongoose</a></li>\n    <li class="green"><a href="http://passportjs.org" target="_blank">Passport.js</a></li>\n    <li class="purple"><a href="http://es6-features.org/" target="_blank">ES6</a></li>\n  </ul>\n\n  <div class="code-style">\n    <span>Code Style</span>\n    <a href="https://github.com/feross/standard" target="_blank">\n      <img src="https://cdn.rawgit.com/feross/standard/master/badge.svg">\n    </a>\n  </div>\n</div>\n'},62:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(612),o=(n.n(i),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(){function e(){this.socket=i.connect("",{transports:["websocket","polling"]})}return e.prototype.emit=function(e,t){this.socket.emit(e,t)},e.prototype.sync=function(e,t){this.socket.on(e,function(e){t(e)})},e.prototype.unsync=function(e){this.socket.removeListener(e)},e.prototype.unsyncAll=function(){this.socket.removeAllListeners()},e.prototype.join=function(e){this.socket.emit("join",e)},e.prototype.leave=function(e){this.socket.emit("leave",e)},e}();a=o([n.i(r.g)(),s("design:paramtypes",[])],a)},620:function(e,t,n){var r=n(453);"string"==typeof r&&(r=[[e.i,r,""]]);n(231)(r,{singleton:!0});r.locals&&(e.exports=r.locals)},623:function(e,t){},624:function(e,t,n){e.exports=n(233)},73:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(72),o=n(98),s=(n.n(o),this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}),a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.http=e;var t=new i.c({"Content-Type":"application/json"});this.options=new i.d({headers:t})}return e.prototype.signup=function(e){var t=this;return new Promise(function(n,r){t.http.post("/signup",JSON.stringify(e),t.options).subscribe(function(e){n(e.json())},function(e){r(e)})})},e.prototype.login=function(e){var t=this;return new Promise(function(n,r){t.http.post("/login",JSON.stringify(e),t.options).subscribe(function(e){localStorage.setItem("id_token",e.json().token),n(e.json())},function(e){r(e)})})},e.prototype.validate=function(e){var t=this;return new Promise(function(n,r){t.http.get("/api/users/validate/"+e).subscribe(function(e){n(e.json())},function(e){r(e)})})},e.prototype.fetchCurrentUser=function(){var e=this;return this.http.get("/api/users/me",this.options).map(function(e){return e.json()}).do(function(t){return e.currentUser=t})},e}();c=s([n.i(r.g)(),a("design:paramtypes",["function"==typeof(u=void 0!==i.e&&i.e)&&u||Object])],c);var u}},[624]);